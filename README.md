# 短链服务

一个在项目初期可使用的短链服务，TPS要求没那么高，不需要很复杂。

> 仅供参考

## 接口

| 接口      | 地址           |
|---------|--------------|
| 创建-数据库锁 | gen          |
| 创建-分布式锁 | /genWithLock |
| 短链跳转    | /a/*         |

## 防重复

- 数据库锁： select for update where空记录会导致表锁，达到类似分布式锁的功能
- Redis分布式锁：这个肯定不会锁了，但性能会有影响

## 缓存

- 短链生成后，存入数据库中，会立即在缓存中存一份
- 查询不存在，从数据库中获取后，会刷新缓存

## 短链算法

MurmurHash
